<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Lissajous curve table | Grégoire Hébert - blog</title>
    <meta property="og:title" content="Lissajous curve table" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="This time it’s not a fractal. Let say, you’ve got a pendulum full of sand. You set a movement, kind of a rotation. At first the sand will draw an ellipse. With the rotation speed decreasing, the ellipse become an circle. After a while, it’s an ellipse again, and then a circle again, but not in the same direction." />
    <meta property="og:description" content="This time it’s not a fractal. Let say, you’ve got a pendulum full of sand. You set a movement, kind of a rotation. At first the sand will draw an ellipse. With the rotation speed decreasing, the ellipse become an circle. After a while, it’s an ellipse again, and then a circle again, but not in the same direction." />
    <link rel="canonical" href="https://knot.gheb.dev/blog/lissajous-curve-table" />
    <meta property="og:url" content="https://knot.gheb.dev/blog/lissajous-curve-table" />
    <meta property="og:site_name" content="Grégoire Hébert - blog" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2019-04-26T11:00:00+02:00" />
    <script type="application/ld+json">
        {"image": "https://knot.gheb.dev/assets/blog/oscilloscope.jpg", "author":"Grégoire Hébert", "publisher":"Grégoire Hébert", "description":"This time it’s not a fractal. Let say, you’ve got a pendulum full of sand. You set a movement, kind of a rotation. At first the sand will draw an ellipse. With the rotation speed decreasing, the ellipse become an circle. After a while, it’s an ellipse again, and then a circle again, but not in the same direction.","@type":"BlogPosting","headline":"Lissajous curve table","dateModified":"2019-04-26T11:00:00+02:00","datePublished":"2019-04-26T11:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://knot.gheb.dev/blog/lissajous-curve-table"},"url":"https://knot.gheb.dev/blog/lissajous-curve-table","@context":"http://schema.org"}</script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet">
    <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" rel="stylesheet">
    <script crossorigin="anonymous" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link href="../../index.css" rel="stylesheet">
</head>
<body>
    <div id="loading">
        <div id="spinner"></div>
    </div>
    <div id="profile">
        <div id="profile_img" style="background: url(https://avatars1.githubusercontent.com/u/878701?v=4) center;"></div>
        <div id="username"><span style="display:block;">Grégoire Hébert</span><a href="https://github.com/GregoireHebert">@GregoireHebert</a></div>
        <div id="userbio" style="display: block;">
            Senior developer and trainer.<br/>
            CTO at <a href="https://les-tilleuls.coop">Les-Tilleuls.coop</a><br/>

            GA enthusiast.<br/>
            Foods and drinks lover.<br/>
            <br/>
            <a href="/hire-me" class="hire">You want to work with me ?</a>
        </div>
        <div id="about">
            <span style="display:block;"><i class="fas fa-users"></i> &nbsp; La Coopérative des Tilleuls</span>
            <span style="display:block;"><i class="fab fa-twitter"></i> &nbsp; <a href="https://www.twitter.com/gheb_dev">@gheb_dev</a></span>
            <span style="display:block;"><i class="fas fa-envelope"></i> &nbsp; <a href="mailto:contact@gheb.dev">contact@gheb.dev</a></span>
            <span style="display:block;"><i class="fas fa-link"></i> &nbsp; <a href="https://les-tilleuls.coop">https://les-tilleuls.coop</a></span>
            <span style="display:block;"><i class="fas fa-map-marker-alt"></i> &nbsp;&nbsp; Lille (59), France</span>
        </div>
    </div>
    <div id="display" class="display-blog">
        <h1><a class="go_back" href="/"><i class="fas fa-arrow-left"></i></a>Lissajous curve table</h1>

        <span class="date">26 Apr 2019</span>

        <p>This time it’s not a fractal.
            Let say, you’ve got <a href="https://www.youtube.com/watch?v=kesRiQbm9V0">a pendulum full of sand</a>. You set a movement, kind of a rotation.
            At first the sand will draw an ellipse. With the rotation speed decreasing, the ellipse become an circle.
            After a while, it’s an ellipse again, and then a circle again, but not in the same direction.</p>

        <p>That combination of speed, rotation and angle is the key.
            Lissajous curve table is the demonstration.</p>

        <p>Let start as the <a href="https://gregoirehebert.github.io/html/css/js/2019/04/25/barnsley-s-fern.html">previous one</a> with an html file,
            and a canvas.</p>

        <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"Lissajous curve table"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;title&gt;</span>Lissajous curve table<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
            <span class="nt">body</span> <span class="p">{</span> <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span> <span class="p">}</span>
        <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">"lissajous"</span> <span class="na">width=</span><span class="s">"800"</span> <span class="na">height=</span><span class="s">"800"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

        <p>Let’s grab the canvas and it’s dimension, we’ll use the 2D context here.
            And we add some configuration.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span><span class="o">&gt;</span>
        <span class="kd">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'lissajous'</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">canvasWidth</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">canvasHeight</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">"2d"</span><span class="p">);</span>

        <span class="c1">// Every line will be drawn in white.</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s1">'#ffffff'</span><span class="p">;</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">'#ffffff'</span><span class="p">;</span>

        <span class="kd">let</span> <span class="nx">angle</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="c1">// default angle</span>
        <span class="kd">let</span> <span class="nx">diameter</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span> <span class="c1">// circle diameter</span>
        <span class="kd">let</span> <span class="nx">cols</span> <span class="o">=</span> <span class="nx">canvasWidth</span> <span class="o">/</span> <span class="nx">diameter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// number of columns through the available space</span>
        <span class="kd">let</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">canvasHeight</span> <span class="o">/</span> <span class="nx">diameter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// number of rows through the available space</span>
        <span class="kd">let</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// radius size</span>

        <span class="kd">let</span> <span class="nx">curves</span> <span class="o">=</span> <span class="p">[[]];</span> <span class="c1">// keeping track of each curve to draw.</span>
    <span class="o">&lt;</span><span class="sr">/script&gt;</span></code></pre></figure>

        <p>We are going to draw/update everything every 33ms, which is about 30 images / second.
            Let’s start with the columns.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">canvasWidth</span><span class="p">,</span><span class="nx">canvasHeight</span><span class="p">);</span>

        <span class="nx">drawCols</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">33</span><span class="p">);</span></code></pre></figure>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawCols</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">i</span><span class="p">;</span> <span class="c1">// here, I let a breathing space on the left, then space each line by the diameter</span>

            <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="nx">canvasHeight</span><span class="p">);</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p><img src="https://knot.gheb.dev/assets/lissajous/columns.png" alt="columns" /></p>

        <p>Now the rows.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawRows</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">l</span>  <span class="nx">et</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">i</span><span class="p">;</span> <span class="c1">// here, I let a breathing space on the left, then space each line by the diameter</span>

            <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">cy</span><span class="p">);</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">canvasWidth</span><span class="p">,</span> <span class="nx">cy</span><span class="p">);</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">canvasWidth</span><span class="p">,</span><span class="nx">canvasHeight</span><span class="p">);</span>

        <span class="nx">drawCols</span><span class="p">();</span>
        <span class="nx">drawRows</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">20</span><span class="p">);</span></code></pre></figure>

        <p><img src="https://knot.gheb.dev/assets/lissajous/rows.png" alt="rows" /></p>

        <p>Now I’ll draw the referential ellipses all around the table.
            So I need a function to draw an ellipse.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawEllipse</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// an arc with the center positioned at x, y of radius r, and a length of 2PI.</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
    <span class="p">}</span></code></pre></figure>

        <p>I can draw them in the drawCols and drawRows methods.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawCols</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">i</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>

            <span class="c1">// the center is the same as the lines I draw, I need to add it's radius to position the ellipse in between.</span>
            <span class="nx">drawEllipse</span><span class="p">(</span><span class="nx">cx</span><span class="o">+</span><span class="nx">r</span><span class="p">,</span> <span class="nx">cy</span><span class="p">);</span>

            <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">drawRows</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">r</span> <span class="p">;</span>
            <span class="kd">let</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">j</span><span class="p">;</span>

            <span class="c1">// same here but vertically.</span>
            <span class="nx">drawEllipse</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="o">+</span><span class="nx">r</span><span class="p">);</span>

            <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p><img src="https://knot.gheb.dev/assets/lissajous/referential.png" alt="referential" /></p>

        <p>Now I want to draw a point that will evolve at different speed in each circle.
            So I’ll need to update the angle at each iteration, and draw the point</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawPosition</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">// same as the ellipse, but with a radius of 4.</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">drawCols</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">i</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>

            <span class="nx">drawEllipse</span><span class="p">(</span><span class="nx">cx</span><span class="o">+</span><span class="nx">r</span><span class="p">,</span> <span class="nx">cy</span><span class="p">);</span>

            <span class="c1">// we calculate the position according to the angle.</span>
            <span class="c1">// to increase the speed of each circle, we multiply by i the angle. (the +1, is for the position 0 ;))</span>
            <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
            <span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>

            <span class="nx">drawPosition</span><span class="p">(</span><span class="nx">cx</span><span class="o">+</span><span class="nx">x</span><span class="o">+</span><span class="nx">r</span><span class="p">,</span> <span class="nx">cy</span><span class="o">+</span><span class="nx">y</span><span class="p">);</span>

            <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">drawRows</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">r</span> <span class="p">;</span>
            <span class="kd">let</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">diameter</span><span class="o">+</span><span class="nx">diameter</span><span class="o">*</span><span class="nx">j</span><span class="p">;</span>

            <span class="nx">drawEllipse</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="o">+</span><span class="nx">r</span><span class="p">);</span>

            <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="p">(</span><span class="nx">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>
            <span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="p">(</span><span class="nx">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">));</span>

            <span class="nx">drawPosition</span><span class="p">(</span><span class="nx">cx</span><span class="o">+</span><span class="nx">x</span><span class="p">,</span> <span class="nx">cy</span><span class="o">+</span><span class="nx">y</span><span class="o">+</span><span class="nx">r</span><span class="p">);</span>

            <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">canvasWidth</span><span class="p">,</span><span class="nx">canvasHeight</span><span class="p">);</span>
        <span class="nx">drawCols</span><span class="p">();</span>
        <span class="nx">drawRows</span><span class="p">();</span>

        <span class="nx">angle</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="p">;</span> <span class="c1">// at each iteration, add .1 of angle.</span>
    <span class="p">},</span> <span class="mi">20</span><span class="p">);</span></code></pre></figure>

        <p><img src="https://knot.gheb.dev/assets/lissajous/points.gif" alt="points" /></p>

        <p>Inside we’ll draw the curves. For this I’ll use a class.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
     <span class="c1">//...</span>
    <span class="p">}</span></code></pre></figure>

        <p>We are going to need to keep track to of each point for each curve, and set the position between each iteration.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
        <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">{</span><span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>Two setters for the position.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
        <span class="c1">//...</span>

        <span class="nx">setX</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">setY</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>A method to add a new point in the history.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
     <span class="c1">//...</span>

         <span class="nx">addPoint</span> <span class="p">()</span> <span class="p">{</span>
             <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
             <span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">{</span><span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">};</span>
         <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>And to finish we need a method to draw these points.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
     <span class="c1">//...</span>
        <span class="nx">drawPoints</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>Let initialize each curve according to the number of columns and rows.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">curve</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>Now we need to update the position of the curve between each iteration.
            The x position has to be updated when drawing the columns and the y position has to be updated when drawing the rows.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">drawCols</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">curves</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="nx">i</span><span class="p">].</span><span class="nx">setX</span><span class="p">(</span><span class="nx">cx</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">drawRows</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">curves</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="nx">i</span><span class="p">].</span><span class="nx">setY</span><span class="p">(</span><span class="nx">cy</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

        <p>We are almost done. We still need to add these points to the curve in each iteration.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">function</span> <span class="nx">addPaths</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">addPoint</span><span class="p">();</span> <span class="c1">// for each iteration, add the current point to each curve history</span>
                <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">drawPoints</span><span class="p">();</span> <span class="c1">// for each iteration draw the points.</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nx">addPaths</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">33</span><span class="p">);</span></code></pre></figure>

        <p><img src="https://knot.gheb.dev/assets/lissajous/result.gif" alt="result" /></p>

        <p>Mesmerizing!
            If We want this to be alright, we need to reset the paths after each revolution.
            Otherwise we’ll end up with too much points to handle.</p>

        <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nx">curve</span> <span class="p">{</span>
        <span class="c1">// ...</span>

       <span class="nx">reset</span> <span class="p">()</span> <span class="p">{</span>
           <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
       <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span> <span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">reset</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">33</span><span class="p">);</span></code></pre></figure>

        <p>Now it’s your turn. Try it.
            What would be the result if I set the canvas size to 1200x1200 or even larger?
            Maybe play with colors, superposition, timing… Send me yours :)</p>

        <p>The code is available <a href="https://gist.github.com/GregoireHebert/09e8bcfafdbf6c9b17fcc4ff7d9834ba">here</a>.</p>

        <p>See you until the next one :)</p>



        <div class="PageNavigation">

            <a class="prev" href="/blog/barnsley-s-fern">&laquo; Barnsley's fern</a>

        </div>

    </div>
    <div id="footer_blog">
        <a href="https://github.com/imfunniee" target="_blank">made on earth by a human</a>
    </div>
    <script type="text/javascript">
    setTimeout(function(){
        document.getElementById("loading").classList.add("animated");
        document.getElementById("loading").classList.add("fadeOut");
        setTimeout(function(){
        document.getElementById("loading").classList.remove("animated");
        document.getElementById("loading").classList.remove("fadeOut");
        document.getElementById("loading").style.display = "none";
        },50);
    },1500);
    $.getJSON("../../config.json", function(user){
        var icon = document.createElement("link");
        icon.setAttribute("rel", "icon");
        icon.setAttribute("href", user[0].userimg);
        icon.setAttribute("type", "image/png");
        document.getElementsByTagName("head")[0].appendChild(icon);
    });
    </script>
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-45648310-1', 'auto');
        ga('send', 'pageview');
    </script>

</body></html>
