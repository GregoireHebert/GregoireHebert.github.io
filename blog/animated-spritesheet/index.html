<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>SpriteSheet Animation | Grégoire Hébert - blog</title>
    <meta property="og:title" content="SpriteSheet Animation" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Animating spritesheet, is easy when using a software, but what if I want to do it only using CSS ? Alright first of all I need a sprite sheet to move this guy:" />
    <meta property="og:description" content="Animating spritesheet, is easy when using a software, but what if I want to do it only using CSS ? Alright first of all I need a sprite sheet to move this guy:" />
    <link rel="canonical" href="https://knot.gheb.dev/blog/animate-spritesheet" />
    <meta property="og:url" content="https://knot.gheb.dev/blog/animate-spritesheet" />
    <meta property="og:site_name" content="Grégoire Hébert - blog" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2018-02-16T21:30:00+01:00" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet">
    <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" rel="stylesheet">
    <script crossorigin="anonymous" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="application/ld+json">
        {"image": "https://knot.gheb.dev/assets/blog/htmljscss.jpg", "author":"Grégoire Hébert", "publisher":"Grégoire Hébert", "description":"Animating spritesheet, is easy when using a software, but what if I want to do it only using CSS ? Alright first of all I need a sprite sheet to move this guy:","@type":"BlogPosting","headline":"SpriteSheet Animation","dateModified":"2018-02-16T21:30:00+01:00","datePublished":"2018-02-16T21:30:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://knot.gheb.dev/blog/animate-spritesheet"},"url":"https://knot.gheb.dev/blog/animate-spritesheet","@context":"http://schema.org"}
    </script>
<link href="../../index.css" rel="stylesheet">
</head>
<body>
    <div id="loading">
        <div id="spinner"></div>
    </div>
    <div id="profile">
        <div id="profile_img" style="background: url(https://avatars1.githubusercontent.com/u/878701?v=4) center;"></div>
        <div id="username"><span style="display:block;">Grégoire Hébert</span><a href="https://github.com/GregoireHebert">@GregoireHebert</a></div>
        <div id="userbio" style="display: block;">
            Senior developer and trainer.<br/>
            CTO at <a href="https://les-tilleuls.coop">Les-Tilleuls.coop</a><br/>
CEO of
 <a href="https://masterclass.les-tilleuls.coop">MasterClass</a><br/>
            GA enthusiast.<br/>
            Foods and drinks lover.
        </div>
        <div id="about">
            <span style="display:block;"><i class="fas fa-users"></i> &nbsp; La Coopérative des Tilleuls</span>
            <span style="display:block;"><i class="fab fa-twitter"></i> &nbsp; <a href="https://www.twitter.com/gheb_dev">@gheb_dev</a></span>
            <span style="display:block;"><i class="fas fa-envelope"></i> &nbsp; <a href="mailto:contact@gheb.dev">contact@gheb.dev</a></span>
            <span style="display:block;"><i class="fas fa-link"></i> &nbsp; <a href="https://les-tilleuls.coop">https://les-tilleuls.coop</a></span>
            <span style="display:block;"><i class="fas fa-map-marker-alt"></i> &nbsp;&nbsp; Lille (59), France</span>
        </div>
    </div>
    <div id="display">
        <h1><a class="go_back" href="/"><i class="fas fa-arrow-left"></i></a>SpriteSheet Animation</h1>

        <span class="date">16 Feb 2018</span>

        <p>Animating spritesheet, is easy when using a software, but what if I want to do it only using CSS ?
            Alright first of all I need a sprite sheet to move this guy:</p>

        <p><img alt="My sheep" src="../../assets/animate-spritesheet/2.png" /></p>

        <p>Let’s start with a walk to stay fit :)</p>

        <p><img alt="My spritesheet" src="../../assets/animate-spritesheet/1.png" /></p>

        <p>Oh, and since I cannot even correctly handle a pencil, I’ll use spritesheets coming from <a href="https://www.gamedeveloperstudio.com/">here</a>.<br />
            We are now ready to begin our journey. Let’s start and display our little sheep here.</p>

        <p>Ok, my spritesheet is 2095x1089 pixels. So my sheep is a 419x363px repetition.</p>

        <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
			<span class="nf">#sheep</span> <span class="p">{</span>
			  <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
			  <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
			  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_walk.png')</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="nt">&lt;/style&gt;</span>
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"sheep"</span><span class="nt">&gt;&lt;/div&gt;</span>
	<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

        <p>It’s seems alright:
            <img alt="My sheep" src="../../assets/animate-spritesheet/2.png" /></p>

        <p>Now, we need to display successively each frame. There is 3 rows of 5 images, that’s 15 frames then !<br />
            With a little research, we eventually found the animation css rule. it works pretty much <a href="https://caniuse.com/#feat=css-animation">everywhere</a></p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#sheep</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_walk.png')</span><span class="p">;</span>
  <span class="nl">animation</span><span class="p">:</span> <span class="n">play</span> <span class="m">0.8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">15</span><span class="p">)</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">play</span> <span class="p">{</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="nl">background-position</span><span class="p">:</span> <span class="m">-2095px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p>It says, use the “play” keyframes (bellow) to move the background position from 0 to -2095px and instead of smothing the animation, move in 15 steps/jumps of my width (419px), please do all this in 0.8 sec, then loop over and over again.
            that makes more or less 2 images every 0.1 sec. I’ve picked this interval at randon I’ll adjust it later if needed.</p>

        <p>let’s see the result:</p>

        <p><img alt="oops" src="../../assets/animate-spritesheet/3.gif" /></p>

        <p>Oooook, something is wrong here, It seem that the loop only contain the first row… it doesn’t goes on the second nor the third.
            We need to find a way to go horizontaly as well.
            Let’s display the all image as grid, and display in a square what we intend to show.</p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#sheep</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">2095px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">1089px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_walk.png')</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#sheep</span><span class="nd">:before</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="nb">solid</span> <span class="m">1px</span> <span class="no">red</span><span class="p">;</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">playvertical</span> <span class="m">2s</span> <span class="n">steps</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playvertical</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="nl">top</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="nl">top</span><span class="p">:</span> <span class="m">1089px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p>What we do is add a red line around each line of sheeps and move their position from top to bottom instead of moving the background.
            since there is 3 lines I tell the animation to move in 3 steps.</p>

        <p><img alt="vertical Lines" src="../../assets/animate-spritesheet/4.gif" /></p>

        <p>Let’s add the same principle for the horizontal lines.</p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#sheep</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="nb">solid</span> <span class="m">1px</span> <span class="no">red</span><span class="p">;</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">playhorizontal</span> <span class="m">3s</span> <span class="n">steps</span><span class="p">(</span><span class="m">5</span><span class="p">)</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playhorizontal</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="nl">left</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="nl">left</span><span class="p">:</span> <span class="m">2095px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p><img alt="Full Grid" src="../../assets/animate-spritesheet/5.gif" /></p>

        <p>Whoo ! We can see we got here the idea of running through each image.
            It seems we can tell the animation to play any number of animation we need ! Great :)
            Let’s unite the two seperate animations in the same instruction and border only the frame we want to display.</p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#sheep</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">2095px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">1089px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_walk.png')</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#sheep</span><span class="nd">:before</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="nb">solid</span> <span class="m">1px</span> <span class="no">red</span><span class="p">;</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">playvertical</span> <span class="m">9s</span> <span class="n">steps</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="n">infinite</span><span class="p">,</span> <span class="n">playhorizontal</span> <span class="m">3s</span> <span class="n">steps</span><span class="p">(</span><span class="m">5</span><span class="p">)</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playvertical</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="nl">top</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="nl">top</span><span class="p">:</span> <span class="m">1089px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playhorizontal</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="nl">left</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="nl">left</span><span class="p">:</span> <span class="m">2095px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p><img alt="Frame Selection" src="../../assets/animate-spritesheet/6.gif" /></p>

        <p>Alright, almost done ! Instead of moving this red border, what if I move the background in the same way ?
            Now we can remove the red line and replace the animation directly on the sheep div.
            Last thing to change is the keyframes, instead of changing the top or left position of the lines,
            we want to move the background position in Y and X according to our previous tests, but adjusted to the sheep size.</p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#sheep</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_walk.png')</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">animation</span><span class="p">:</span> <span class="n">playvertical</span> <span class="m">0.9s</span> <span class="n">steps</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="n">infinite</span><span class="p">,</span> <span class="n">playhorizontal</span> <span class="m">0.3s</span> <span class="n">steps</span><span class="p">(</span><span class="m">5</span><span class="p">)</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playvertical</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-y</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-y</span><span class="p">:</span> <span class="m">-1089px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">playhorizontal</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-x</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-x</span><span class="p">:</span> <span class="m">-2095px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p><img alt="Full Animation" src="../../assets/animate-spritesheet/7.gif" /></p>

        <p>Whou hou ! We can now apply the same rule to every animation we got.</p>

        <p>Little specificity, sometimes you need to stop the animation on the last frame, instead of playing it over and over.
            The solution is to replace “infinite” by “forward”. It act as if there was 1 frame less than it should, goes one frame further (the last one we want) and stop there.</p>

        <p>If my animation has 5 steps, I’ll declare it like this.</p>

        <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#die</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">419px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">363px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url('spritesheets/white_sheep_1/__white_sheep_1_die.png')</span><span class="p">;</span>
  <span class="nl">animation</span><span class="p">:</span> <span class="n">die</span> <span class="m">0.6s</span> <span class="n">steps</span><span class="p">(</span><span class="m">4</span><span class="p">);</span>
  <span class="nl">animation-fill-mode</span><span class="p">:</span> <span class="n">forwards</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@keyframes</span> <span class="n">die</span> <span class="p">{</span>
     <span class="nt">0</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-x</span><span class="p">:</span>   <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
   <span class="nt">100</span><span class="o">%</span> <span class="p">{</span> <span class="py">background-position-x</span><span class="p">:</span> <span class="m">-1676px</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        <p>Tadda !</p>

        <p><img alt="Every Animation" src="../../assets/animate-spritesheet/8.gif" /></p>

        <p>Thanks for reading !</p>

    </div>
    <div id="footer_blog">
        <a href="https://github.com/imfunniee" target="_blank">made on earth by a human</a>
    </div>
    <script type="text/javascript">
    setTimeout(function(){
        document.getElementById("loading").classList.add("animated");
        document.getElementById("loading").classList.add("fadeOut");
        setTimeout(function(){
        document.getElementById("loading").classList.remove("animated");
        document.getElementById("loading").classList.remove("fadeOut");
        document.getElementById("loading").style.display = "none";
        },50);
    },1500);
    $.getJSON("../../config.json", function(user){
        var icon = document.createElement("link");
        icon.setAttribute("rel", "icon");
        icon.setAttribute("href", user[0].userimg);
        icon.setAttribute("type", "image/png");
        document.getElementsByTagName("head")[0].appendChild(icon);
    });
    </script>
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-45648310-1', 'auto');
        ga('send', 'pageview');
    </script>

</body></html>
